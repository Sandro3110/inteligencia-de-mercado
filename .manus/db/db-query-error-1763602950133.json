{
  "query": "\n-- Análise completa dos dados gerados\n\n-- 1. Mercados criados\nSELECT \n  'MERCADOS' as tipo,\n  m.id,\n  m.nome,\n  m.categoria,\n  m.segmentacao,\n  m.tamanhoEstimado,\n  COUNT(DISTINCT cm.clienteId) as clientes_associados\nFROM mercados_unicos m\nLEFT JOIN clientes_mercados cm ON cm.mercadoId = m.id\nWHERE m.pesquisaId = 1\nGROUP BY m.id\nORDER BY m.id;\n\n-- 2. Produtos criados\nSELECT \n  'PRODUTOS' as tipo,\n  p.id,\n  c.nome as cliente,\n  m.nome as mercado,\n  p.nome as produto,\n  p.categoria,\n  LEFT(p.descricao, 100) as descricao_preview\nFROM produtos p\nJOIN clientes c ON c.id = p.clienteId\nJOIN mercados_unicos m ON m.id = p.mercadoId\nWHERE p.pesquisaId = 1\nORDER BY p.clienteId, p.id;\n\n-- 3. Concorrentes criados\nSELECT \n  'CONCORRENTES' as tipo,\n  co.id,\n  m.nome as mercado,\n  co.nome as concorrente,\n  co.produto,\n  co.porte,\n  co.qualidadeScore,\n  co.qualidadeClassificacao\nFROM concorrentes co\nJOIN mercados_unicos m ON m.id = co.mercadoId\nWHERE co.pesquisaId = 1\nORDER BY m.id, co.qualidadeScore DESC\nLIMIT 30;\n\n-- 4. Leads criados\nSELECT \n  'LEADS' as tipo,\n  l.id,\n  m.nome as mercado,\n  l.nome as lead,\n  l.setor,\n  l.tipo,\n  l.porte,\n  l.qualidadeScore,\n  l.qualidadeClassificacao\nFROM leads l\nJOIN mercados_unicos m ON m.id = l.mercadoId\nWHERE l.pesquisaId = 1\nORDER BY m.id, l.qualidadeScore DESC\nLIMIT 20;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4LxBqKfHv1LE9mk.f65588d6698e --database XpSHcSiEisTmX38X46V9tQ --execute \n-- Análise completa dos dados gerados\n\n-- 1. Mercados criados\nSELECT \n  'MERCADOS' as tipo,\n  m.id,\n  m.nome,\n  m.categoria,\n  m.segmentacao,\n  m.tamanhoEstimado,\n  COUNT(DISTINCT cm.clienteId) as clientes_associados\nFROM mercados_unicos m\nLEFT JOIN clientes_mercados cm ON cm.mercadoId = m.id\nWHERE m.pesquisaId = 1\nGROUP BY m.id\nORDER BY m.id;\n\n-- 2. Produtos criados\nSELECT \n  'PRODUTOS' as tipo,\n  p.id,\n  c.nome as cliente,\n  m.nome as mercado,\n  p.nome as produto,\n  p.categoria,\n  LEFT(p.descricao, 100) as descricao_preview\nFROM produtos p\nJOIN clientes c ON c.id = p.clienteId\nJOIN mercados_unicos m ON m.id = p.mercadoId\nWHERE p.pesquisaId = 1\nORDER BY p.clienteId, p.id;\n\n-- 3. Concorrentes criados\nSELECT \n  'CONCORRENTES' as tipo,\n  co.id,\n  m.nome as mercado,\n  co.nome as concorrente,\n  co.produto,\n  co.porte,\n  co.qualidadeScore,\n  co.qualidadeClassificacao\nFROM concorrentes co\nJOIN mercados_unicos m ON m.id = co.mercadoId\nWHERE co.pesquisaId = 1\nORDER BY m.id, co.qualidadeScore DESC\nLIMIT 30;\n\n-- 4. Leads criados\nSELECT \n  'LEADS' as tipo,\n  l.id,\n  m.nome as mercado,\n  l.nome as lead,\n  l.setor,\n  l.tipo,\n  l.porte,\n  l.qualidadeScore,\n  l.qualidadeClassificacao\nFROM leads l\nJOIN mercados_unicos m ON m.id = l.mercadoId\nWHERE l.pesquisaId = 1\nORDER BY m.id, l.qualidadeScore DESC\nLIMIT 20;\n",
  "returncode": 1,
  "logs": [
    "ERROR 1054 (42S22) at line 5: Unknown column 'm.tamanhoestimado' in 'field list'"
  ]
}
